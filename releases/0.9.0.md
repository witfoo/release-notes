# WitFoo Analytics v0.9.0

**Release Date:** 2026-02-21

## Summary

WitFoo Analytics v0.9.0 delivers multi-tenant architecture, MITRE ATT&CK v18 integration, a full SOAR/Responder engine, and significant performance and security hardening. This release introduces tenant isolation with automated provisioning, real-time WebSocket streaming across all services, and internationalization support for six locales. Extensive security remediation addresses log injection, SSRF, and dependency vulnerabilities across the entire codebase.

## What's New

### Features

**Multi-Tenant Architecture (PR130)**
- Multi-tenant Cassandra schema and domain models with tenant isolation
- Platform Admin role and granular permissions model
- Tenant CRUD API with automated provisioning and onboarding workflows
- JWT-based multi-tenant authentication with tenant context switching middleware
- Tenant-aware pipeline — removed hardcoded `ORG_ID` from all background services
- Conductor-to-Tenant registration flow
- Tenant Selector UI with tenant store, switcher component, and NavBar integration
- Multi-tenant end-to-end tests and system test extensions

**MITRE ATT&CK v18 Integration (PR141)**
- ATT&CK v18 taxonomy import, sync, and graph enrichment pipeline
- Stream-name to ATT&CK technique mapping for automated classification
- `CONTAINS_ANY` operator for ATT&CK-aware lead rules and MOs
- ATT&CK search, filter, and UI integration with coverage visualization
- ATT&CK coverage handler and adapter test suite

**SOAR & Responder Engine (PR30, PR31)**
- SOAR playbooks, task management, and My Tasks dashboard
- Responder domain models, Cassandra schema, and repository layer
- Responder engine service with Docker container orchestration
- REST API with job management and proxy routing
- Python SDK and MCP tools for responder automation
- Monaco editor UI with NATS streaming for live responder output

**Real-Time Streaming (PR28)**
- WebSocket streaming across all services for live data updates

**Internationalization (PR34)**
- Full localization framework with six locales (including RTL support)
- Locale persistence across sessions via Paraglide i18n integration

**AI & Automation**
- Tool-use support in AI chat for live security data queries
- Intel Meta Auto Parser integration with YAML generation and framework mapping
- Conductor auto-registration with Console
- Admin email configuration support

**System Capacity & License Monitoring (PR115)**
- System capacity and license usage monitoring infrastructure
- Disabled-mode middleware with PauseController and system status API
- UI banners and notification engine for capacity alerts
- Conductor integration for license enforcement

**Analytics Monitoring (PR121)**
- Automated error detection and analytics monitoring pipeline

### Improvements

**Performance Optimization (PR50, PR51, PR101)**
- Artifact search latency reduced from 5.19s to 41ms at p95 (99.2% reduction)
- Artifact p95 latency reduced from 487ms to 50ms; incident p95 to 159ms
- Heap memory usage reduced from 3.6 GB to 386 MB
- Gzip compression with smart skipper, `is_alarm` denormalization, and cursor pagination
- Circuit breaker patterns for resilience under load
- Ristretto cache abstraction with environment variable configuration
- Cassandra query observer, connection pool tuning, and compaction strategy evaluation
- GC tuning and memory leak detection and fixes
- Baseline benchmark scripts, stress/spike/soak tests, and pprof profiling tooling

**Security Hardening (PR102)**
- Log injection prevention across 76+ files (~253 injection sites) with `pkg/sanitize` library (CWE-117)
- SSRF prevention, file close fixes, and clear-text logging remediation
- Security headers middleware added to API layer
- JavaScript/TypeScript CodeQL alert remediation — remote property injection, log injection, shell injection, 89 unused variables/imports
- Vulnerable Go dependencies updated (runc v1.3.4, mapstructure v2.5.0)
- High-severity npm audit vulnerabilities resolved (minimatch ReDoS)
- Comprehensive fuzz testing infrastructure
- End-to-end security tests with JSON report generation

**CI/CD & Build Pipeline**
- Workflow consolidation and quality gate updates
- Submodule build gate before Docker image builds
- CodeQL analysis expanded to submodules with security-fuzz integration
- Release branch tooling (`release-branch.sh`) for coordinated submodule releases
- Slack notification migration to `slackapi/slack-github-action@v2.1.1`
- Stable and beta branch build support

**Code Quality (PR99, PR133)**
- Linter enforcement, shared library consolidation, and dead code removal
- CI/CD policy alignment across all modules
- Dependency updates and version bumps across Go, npm, and submodule ecosystem
- `gofmt`, `goimports`, `revive`, and `staticcheck` compliance enforced

**Demo & SOC Environment (PR132)**
- Shared reference data seeder for demo environments
- 12 demo.witfoo.com fixes spanning seeders, UI, config, and E2E tests
- Improved demo E2E test reliability and assertion accuracy

**Data Quality & Enrichment**
- Rich artifact messages and demo data improvements (PR123)
- Reporter data quality corrections (PR122)
- Fingerprint disambiguation workflow and analytics documentation (PR135)
- Detection metadata sync pipeline (PR136)

**Infrastructure & Reliability**
- Cassandra startup retry logic to prevent permanent connection failures
- TLS support for artifact-ingestion Conductor WebSocket exports
- Multi-tier Cassandra authentication fixes
- AstraDB support for artifact ingestion
- Docker socket GID fix and container mount corrections
- Cassandra datacenter default corrected to `dc1`
- ResizeObserver memory leak fix in Conductor UI

### Bug Fixes

- Fixed hardcoded Cassandra credentials in graph-processor and incident-engine
- Fixed WebSocket loop, null stores, and Monaco crash in UI
- Fixed JWT claims handling and TLS protocol negotiation
- Fixed onboarding wizard first-admin 400 error and null `completed_steps` TypeError
- Fixed timezone coverage, responder status, progress bar, and duplicate key issues in onboarding
- Fixed AIOConductor pipeline stall, licensing URL, and container mount issues
- Fixed `ConsoleClient` for AIOConductor role
- Added Grafana Cloud export services to AIO/Processing roles
- Fixed table names in health repositories to match CQL schema
- Added `ALTER TABLE` for missing `leads.is_block_action` and `users.locale` columns
- Fixed AI config auto-configure retry for fresh Cassandra installs
- Added 60-second schema finalization delay before demo-data seeding
- Fixed current date injection into AI chat system prompt
- Extended timeouts for AI chat tool-use round-trips
- Fixed Conductor pipeline to verify `graph_nodes` instead of artifacts table
- Fixed `DockerMetricsService` container filter for WFA naming conventions
- Corrected import ordering in `cassandra_repository.go`
- Hidden Dev Mode button in non-development deployments
- Fixed axios build failures in both UIs

## Quality Assurance

### Test Results

| Test Suite | Status | Date |
|---|---|---|
| System Tests (AIO Integration) | ⚠️ Failure | 2026-02-17 |
| E2E Tests (Playwright UI) | ⚠️ Cancelled | 2026-02-17 |

> **Note:** System integration tests are failing and E2E tests were cancelled as of the last CI run. The team is actively investigating. This release includes substantial new test infrastructure (fuzz testing, multi-tenant E2E, security E2E, performance benchmarks) that expands overall coverage significantly.

### Test Coverage Summary

- **Multi-tenant E2E tests** validating tenant provisioning, context switching, and isolation
- **ATT&CK coverage handler and adapter tests** for MITRE v18 integration
- **Security test automation** including SSRF prevention tests, fuzz tests, and JSON report generation
- **Performance benchmarks** with stress, spike, and soak test suites; pprof profiling integration
- **Demo environment E2E tests** with improved reliability and assertion accuracy
- **UI performance E2E tests** for frontend rendering and interaction latency

## Breaking Changes

- **Multi-tenant schema migration required:** New Cassandra tables and columns for tenant isolation. Existing single-tenant deployments must run the migration scripts before upgrading.
- **Hardcoded `ORG_ID` removed:** Background services now derive organization context from tenant configuration. Custom pipeline integrations referencing hardcoded org IDs must be updated.
- **JWT token format updated:** Tokens now include tenant context claims. Clients using direct JWT parsing should update to the new claim structure.
- **`pkg/sanitize` enforced:** All log output now passes through sanitization. Custom log integrations that parse raw log strings may see format changes.
- **Dependency migration:** `generative-ai-go` replaced with `google.golang.org/genai`; LDAP package deprecation addressed. Review Go module dependencies if vendoring.

## Contributors

- Claude (AI-assisted development)
- WitFoo Development Team

---
*Release notes generated by Claude Opus 4.6*
*Repository: witfoo-dev/analytics*