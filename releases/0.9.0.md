# WitFoo Analytics v0.9.0

**Release Date:** 2026-02-21

## Summary

WitFoo Analytics v0.9.0 delivers multi-tenant architecture, a comprehensive security hardening pass resolving over 250 log-injection and CodeQL findings, and significant performance optimizations achieving up to 99.2% latency reduction on artifact search. This release also introduces SOAR playbook execution, an automated responder engine, real-time WebSocket streaming, full internationalization support, and a new license capacity monitoring system.

## What's New

### Features

**Multi-Tenant Architecture (PR130)**
- Tenant-aware schema, domain models, and Cassandra migrations for full data isolation
- Platform Admin role with elevated permissions for cross-tenant management
- Tenant CRUD API with automated provisioning and onboarding workflows
- Conductor-to-Tenant registration for appliance-level tenant binding
- JWT-based multi-tenant authentication with tenant context switching middleware
- Tenant-aware background pipelines — removed all hardcoded `ORG_ID` references
- Tenant Selector UI with tenant store, switcher component, and NavBar integration
- Multi-tenant end-to-end tests and system test extensions

**SOAR & Automated Response (PR30, PR31)**
- SOAR playbook engine with task management and My Tasks dashboard
- Responder engine with Docker container orchestration for isolated action execution
- Responder REST API with job management and proxy routing
- Python SDK and MCP tools for responder integration
- Monaco editor UI for playbook authoring with NATS streaming support

**Security Hardening (PR102)**
- Log-injection prevention library (`pkg/sanitize`, CWE-117) applied across 120+ API, 92+ pkg, and 41+ service module sites
- SSRF prevention, file descriptor leak fixes, and clear-text credential logging remediation
- Security headers middleware added to all API services
- Fixed 89 JavaScript/TypeScript CodeQL alerts: remote property injection, log injection, shell injection, unused variables
- Upgraded vulnerable dependencies: runc v1.3.4, mapstructure v2.5.0
- Comprehensive fuzz testing infrastructure with automated security test suite
- E2E security tests with JSON report generation

**Performance Optimization (PR50, PR51, PR101)**
- Artifact search latency reduced from 5.19s to 41ms at p95 (99.2% improvement)
- Artifact p95 reduced from 487ms to 50ms; incident p95 to 159ms
- Heap memory usage reduced from 3.6 GB to 386 MB
- Gzip compression with smart skipper, `is_alarm` denormalization, cursor pagination, and circuit breaker patterns
- Ristretto cache abstraction with environment variable configuration
- Cassandra query observer and connection pool tuning
- Memory leak detection and remediation across services
- GC tuning and baseline benchmark tooling with stress, spike, and soak test suites

**Real-Time Streaming (PR28)**
- WebSocket streaming added across all services for real-time event delivery

**Internationalization (PR34)**
- Full localization framework with 6 locales, RTL layout support, and locale persistence via Paraglide

**AI Chat Enhancements**
- Tool-use support for live security data queries from AI chat
- Current date injection into AI chat system prompts
- Extended timeouts for AI chat tool-use round-trips

**License & Capacity Monitoring (PR115)**
- System capacity and license usage monitoring with threshold alerts
- Disabled-mode middleware and PauseController for license enforcement
- UI banners and notification engine integration for capacity warnings
- Conductor integration for distributed license state propagation

**Detection Metadata Sync (PR136)**
- Detection metadata sync pipeline with Cassandra schema and repository implementations
- Intel integration documentation and reference YAML generation

**Intel Meta Auto Parser (PR134)**
- Automated YAML generation from intel metadata with framework mapping integration

**Analytics Monitoring (PR121)**
- Automated error detection and analytics monitoring dashboards

**Fingerprint Disambiguation (PR135)**
- Workflow and analytics documentation for fingerprint disambiguation logic

**Conductor Auto-Registration**
- Conductors now auto-register with Console for simplified fleet management

**Admin Email Configuration**
- Administrative email settings configurable through the platform

**TLS Artifact Ingestion**
- TLS support added to artifact-ingestion for secure Conductor WebSocket exports

### Improvements

**Demo & SOC Environment (PR132)**
- Fixed 12 demo environment issues spanning seeders, UI, configuration, and E2E tests
- Shared reference data seeder for consistent demo and SOC environments
- Schema finalization delay before demo-data seeding for fresh installs
- AI config auto-configure retry logic for new Cassandra deployments

**CI/CD Pipeline (PR133)**
- CI/CD policy alignment across all build and release workflows
- Submodule build gate added before Docker image builds
- CodeQL analysis expanded to submodules with CGO and toolchain fixes
- Security fuzz testing merged into build-and-push pipeline
- Consolidated workflows with updated quality gates
- Release branch automation script for coordinated submodule releases
- Swagger doc generation for licensing-api integrated into CI
- Migrated Slack notifications to `slackapi/slack-github-action@v2.1.1`

**Code Quality (PR99)**
- Linter enforcement across Go and TypeScript codebases
- Shared library consolidation and dead code removal
- E2E test stability improvements with documented reliability patterns

**Cassandra Compaction Evaluation (PR52)**
- Compaction strategy evaluation tooling and documented results for production tuning

**Connection Pool Tuning (PR53)**
- Performance validation results and connection pool configuration documentation

**Onboarding Wizard**
- Timezone coverage, responder status, progress bar, admin step, and duplicate key fixes

**Graph Visualization (PR137)**
- Cytoscape node icons and disconnected network rendering support

**Documentation**
- Comprehensive documentation audit aligned with current codebase
- CLAUDE.md updated with session learnings and dependency update procedures
- Archived completed PR prompts and working files

### Bug Fixes

- **Fixed hardcoded Cassandra credentials** in graph-processor and incident-engine
- **Fixed Cassandra datacenter default** from `datacenter1` to `dc1` in incident-engine
- **Added Cassandra startup retry logic** to prevent permanent connection failures on slow starts
- **Fixed WebSocket reconnection loop**, null store references, and Monaco editor crash
- **Fixed JWT claims handling** and TLS protocol negotiation
- **Corrected health repository table names** to match CQL schema definitions
- **Added missing `ALTER TABLE`** for `leads.is_block_action` and `users.locale` columns
- **Fixed onboarding wizard** first-admin 400 error and TypeError on null `completed_steps`
- **Fixed conductor-pipeline-monitor** script interface alignment
- **Fixed Docker socket GID** mapping and container `group_add` configuration
- **Fixed Cassandra auth and CQL migrations** for appliance deployments
- **Fixed AIOConductor pipeline stall**, licensing URL resolution, and container mounts
- **Fixed DockerMetricsService** container filter to support WFA naming conventions
- **Fixed Dev Mode button** visibility in non-development deployments
- **Resolved high-severity npm audit vulnerability** (minimatch ReDoS)
- **Fixed ResizeObserver memory leak** in conductor-ui
- **Fixed Grafana Cloud export services** missing from AIO/Processing roles
- **Fixed ConsoleClient** initialization for AIOConductor role
- **Fixed static asset test failures** when generated files are not present

## Quality Assurance

### Test Results

| Test Suite | Status | Date |
|---|---|---|
| System Tests (AIO Integration) | ⚠️ Failure | 2026-02-17 |
| E2E Tests (Playwright UI) | ⚠️ Cancelled | 2026-02-17 |

> **Note:** System integration tests are failing as of the test run on 2026-02-17. The failures are under active investigation. The E2E Playwright suite was cancelled due to the upstream system test dependency. Users deploying this release should validate against their environment-specific test suites.

### Test Coverage Summary

- **Multi-tenant E2E tests** covering tenant provisioning, context switching, and data isolation
- **Security test suite** with SSRF prevention, log-injection, and fuzz testing across all API surfaces
- **Performance benchmarks** with stress, spike, and soak test profiles validated against p95 thresholds
- **UI E2E tests** for performance regressions, SOAR workflows, and streaming functionality
- **Demo environment validation** with automated seeder and configuration tests

## Breaking Changes

- **Multi-tenant schema migration required.** Cassandra schema changes introduce tenant-scoped keyspaces and tables. Existing single-tenant deployments must run the provided CQL migration scripts before upgrading.
- **Hardcoded `ORG_ID` removed from background services.** Pipeline services now derive organization context from tenant configuration. Custom pipeline configurations referencing static `ORG_ID` values must be updated.
- **JWT token structure updated.** Tokens now include tenant context claims. API clients using direct JWT parsing should update to handle the new claim structure.
- **`pkg/sanitize` enforced across all logging.** Custom service extensions that log user-supplied input must adopt the sanitize library to pass CI quality gates.

## Contributors

- Claude (AI pair programmer)
- WitFoo Development Team

---
*Release notes generated by Claude Opus 4.6*
*Repository: witfoo-dev/analytics*