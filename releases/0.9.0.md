# WitFoo Analytics v0.9.0

**Release Date:** 2026-02-21

## Summary

WitFoo Analytics v0.9.0 delivers multi-tenant architecture, a comprehensive security hardening pass resolving CodeQL alerts and log-injection vulnerabilities, and significant performance optimizations achieving up to 99.2% reduction in artifact search latency. This release also introduces SOAR playbook execution, an automated responder engine, real-time WebSocket streaming, full internationalization support, and a new license capacity monitoring system.

## What's New

### Features

**Multi-Tenant Architecture (PR130)**
- Tenant-aware schema, domain models, and Cassandra migrations for full data isolation
- Platform admin role with elevated permissions for cross-tenant management
- Tenant CRUD API with automated provisioning and onboarding workflows
- Conductor-to-tenant registration enabling appliance-level tenant binding
- JWT-based multi-tenant authentication with tenant context switching middleware
- Tenant-aware background pipelines — removed hardcoded `ORG_ID` from all services
- Tenant Selector UI with tenant store, switcher component, and NavBar integration
- Multi-tenant end-to-end tests and system test extensions

**SOAR & Automated Response (PR30, PR31)**
- SOAR playbooks, task management, and My Tasks dashboard for SOC analysts
- Responder engine with Docker container orchestration for action execution
- Responder domain models, Cassandra schema, and repository layer
- REST API for responder job management and proxy routing
- Python SDK and MCP tools for responder integration
- Monaco editor UI with NATS streaming for live responder output

**Security Hardening (PR102)**
- Sanitization library (`pkg/sanitize`) for CWE-117 log-injection prevention across 250+ injection sites in API, pkg, and service modules
- SSRF prevention, file descriptor leak fixes, and clear-text credential logging remediation
- Security headers middleware added to all API endpoints
- Fixed 89 JavaScript/TypeScript CodeQL alerts including remote property injection, log injection, and shell injection
- Upgraded vulnerable dependencies: runc v1.3.4, mapstructure v2.5.0
- Comprehensive security testing automation — E2E security tests, fuzz testing infrastructure, and JSON report generation

**Performance Optimization (PR50, PR51, PR101)**
- Artifact search latency reduced from 5.19s p95 to 41ms p95 (99.2% improvement)
- Artifact query p95 reduced from 487ms to 50ms; incident query p95 to 159ms
- Heap memory usage reduced from 3.6 GB to 386 MB
- Ristretto cache abstraction with environment variable configuration
- Cassandra query observer and connection pool tuning
- Memory leak detection and fixes across service modules
- Gzip compression with smart skipper and GC tuning for backend services
- `is_alarm` denormalization, cursor pagination, and circuit breaker patterns
- Baseline benchmark scripts, stress/spike/soak tests, and pprof profiling tooling

**Real-Time Streaming (PR28)**
- WebSocket streaming added across all services for real-time data delivery

**Internationalization (PR34)**
- Full localization support with 6 locales, RTL layout support, and locale persistence

**License & Capacity Monitoring (PR115)**
- System capacity and license monitoring with threshold alerting
- Disabled-mode middleware and PauseController for license enforcement
- UI banners and notification engine integration for capacity warnings
- Conductor integration for centralized license state management

**AI Chat Enhancements**
- Tool-use support for live security data queries from the AI chat interface
- Current date injection into AI chat system prompts for temporal awareness
- Extended timeouts for AI chat tool-use round-trips

**Intel & Detection Metadata (PR134, PR136)**
- Intel Meta Auto Parser integration with comprehensive YAML generation and framework mapping
- Detection metadata sync pipeline with Cassandra schema and repository implementations
- Intel integration documentation and reference YAML updates

**Additional Features**
- Conductor auto-registration with Console for streamlined appliance onboarding
- TLS support for artifact-ingestion Conductor WebSocket exports
- Admin email configuration support
- Fingerprint disambiguation workflow and analytics documentation (PR135)
- Analytics monitoring and automated error detection (PR121)
- Release branch tooling (`release-branch.sh`) for coordinated multi-submodule releases
- Cytoscape graph node icons and disconnected network visualization support (PR137)
- Rich artifact messages and demo data improvements (PR123)

### Improvements

**Demo & SOC Environment**
- Seven-phase fix for demo environment reliability at demo.witfoo.com
- Shared reference data seeder for consistent demo and SOC environments
- AI config auto-configure retry logic for fresh Cassandra installs
- Schema finalization delay before demo-data seeding to prevent race conditions
- Improved demo E2E test reliability and assertion accuracy

**CI/CD Pipeline**
- Workflow consolidation and quality gate updates
- Submodule build gate added before Docker image builds
- Security fuzz testing merged into build-and-push pipeline
- CodeQL analysis expanded to cover submodules
- Docs publishing added to release workflows
- Image cleanup updated for snok/container-retention-policy v3 API
- Slack notifications migrated to slackapi/slack-github-action v2.1.1

**Code Quality**
- Linter enforcement with shared libraries and Go consolidation
- Dead code removal and flaky E2E test stabilization
- Comprehensive documentation audit and alignment with current codebase
- Struct field tag alignment across modules
- CI/CD policy alignment (PR133)

**Infrastructure**
- Cassandra startup retry logic to prevent permanent connection failure on cold starts
- AstraDB support for artifact-ingestion
- WFA admin password seeding and node settings configuration
- Grafana Cloud export services added to AIO/Processing roles
- Docker socket GID fix and container mount corrections
- Multi-instance connector support in Conductor suite

### Bug Fixes

- Fixed hardcoded Cassandra credentials in graph-processor and incident-engine
- Fixed incorrect Cassandra datacenter default (`dc1` instead of `datacenter1`)
- Corrected table names in health repositories to match CQL schema
- Fixed WebSocket reconnection loop, null store references, and Monaco editor crash
- Fixed JWT claims handling and TLS protocol negotiation
- Fixed onboarding wizard first-admin 400 error and TypeError on null `completed_steps`
- Fixed timezone coverage, responder status display, progress bar, and admin step in onboarding
- Added missing `ALTER TABLE` for `leads.is_block_action` and `users.locale` columns
- Fixed AIOConductor pipeline stall, licensing URL resolution, and container mounts
- Fixed AIOConductor networking, iptables rules, and configure wizard
- Fixed conductor-pipeline-monitor script interface alignment
- Hidden Dev Mode button in non-development deployments
- Fixed multi-tier Cassandra authentication
- Fixed ResizeObserver memory leak in conductor-ui
- Resolved high-severity npm audit vulnerabilities (minimatch ReDoS)
- Fixed reporter data quality corrections (PR122)
- Fixed `GetScoreBreakdown` always-nil error return
- Increased Node.js heap size for Paraglide i18n build in UI Dockerfile
- Fixed DockerMetricsService container filter for WFA naming conventions

## Quality Assurance

### Test Results

| Test Suite | Status | Date |
|---|---|---|
| System Tests (AIO Integration) | ⚠️ Failure | 2026-02-17 |
| E2E Tests (Playwright UI) | ⚠️ Cancelled | 2026-02-17 |

> **Note:** System integration tests are failing as of the test run on 2026-02-17. The E2E test suite was cancelled and did not complete. These failures are under active investigation and are related to ongoing multi-tenant schema migration validation. Production deployment should be gated on resolution of these test failures.

### Test Coverage Summary

- **Multi-tenant E2E tests** validate tenant provisioning, context switching, and data isolation
- **Security test automation** covers SSRF prevention, log-injection sanitization, fuzz testing, and security header enforcement
- **Performance benchmarks** include baseline scripts, stress/spike/soak tests, and pprof profiling with documented threshold assertions
- **UI E2E tests** cover performance regressions, onboarding flows, and streaming toggle behavior
- **Cassandra compaction strategy evaluation** tooling and connection pool tuning validated under load
- **Demo environment tests** improved for reliability with better assertions and retry logic

## Breaking Changes

- **Multi-tenant schema migration required:** Cassandra schema changes introduce tenant-scoped tables and columns. Existing single-tenant deployments must run the provided CQL migrations before upgrading.
- **Hardcoded `ORG_ID` removed from background services:** Services now derive organization context from tenant configuration. Any custom scripts or integrations referencing a static `ORG_ID` environment variable must be updated.
- **JWT token format updated:** Tokens now include tenant context claims. Existing API integrations using JWT authentication will need to handle the new claims structure.
- **Log output format changed:** Log-injection sanitization modifies log output across all Go services. Log parsing rules or SIEM integrations that depend on specific log formats may require adjustment.
- **Deprecated LDAP configuration migrated:** LDAP deprecation warnings resolved; review LDAP configuration if using directory-based authentication.

## Contributors

- WitFoo Development Team

---
*Release notes generated by Claude Opus 4.6*
*Repository: witfoo-dev/analytics*